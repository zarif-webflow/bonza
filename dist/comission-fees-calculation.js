var u=({selector:o,parent:s,log:n="debug"})=>{let a=(s||document).querySelector(o);return a===null?(n===!1||(n==="debug"?console.debug:console.error)(`${n.toUpperCase()}: Element with selector "${o}" not found in ${s!==void 0?"the specified parent element:":"the document."}`,s),null):a},m=({selector:o,parent:s,log:n="debug"})=>{let a=Array.from((s||document).querySelectorAll(o));return a.length===0?(n===!1||(n==="debug"?console.debug:console.error)(`${n.toUpperCase()}: No elements found with selector "${o}" in ${s!==void 0?"the specified parent element:":"the document."}`,s),null):a};window.wfCustomPageLoadFeatures||(window.wfCustomPageLoadFeatures={});var w=o=>{let s=Math.max(o*.15,12e3),n=Math.max(o*.04,4e3),a=s-n;return{averageBrokerFee:s,bonzaFee:n,savings:a}};function E(o,s={}){let{allowDecimals:n=!0,allowNegative:a=!1,maxDecimals:l=2}=s;o.setAttribute("inputmode","numeric"),o.addEventListener("keydown",t=>{let e=t.key,r=o.value,c=o.selectionStart||0;e==="Backspace"||e==="Delete"||e==="Tab"||e==="Escape"||e==="Enter"||e==="ArrowLeft"||e==="ArrowRight"||e==="ArrowUp"||e==="ArrowDown"||e==="Home"||e==="End"||t.ctrlKey&&(e==="a"||e==="c"||e==="v"||e==="x"||e==="z")||/^\d$/.test(e)||n&&e==="."&&!r.includes(".")||e!==","&&(a&&e==="-"&&c===0&&!r.includes("-")||t.preventDefault())}),o.addEventListener("paste",t=>{t.preventDefault();let e=t.clipboardData?.getData("text")||"",r=p(e,{allowDecimals:n,allowNegative:a,maxDecimals:l});if(r){let c=o.selectionStart||0,i=o.selectionEnd||0,f=o.value,b=f.substring(0,c)+r+f.substring(i);o.value=b;let g=c+r.length;o.setSelectionRange(g,g),o.dispatchEvent(new Event("input",{bubbles:!0}))}}),o.addEventListener("input",()=>{let t=o.value,e=p(t,{allowDecimals:n,allowNegative:a,maxDecimals:l});if(t!==e){let r=o.selectionStart||0;o.value=e;let c=t.length-e.length,i=Math.max(0,r-c);o.setSelectionRange(i,i)}})}function p(o,s){let{allowDecimals:n=!0,allowNegative:a=!1,maxDecimals:l=2}=s,t=o,e="[^0-9";if(n&&(e+="."),a&&(e+="-"),e+=",]",t=t.replace(new RegExp(e,"g"),""),a){let r=(t.match(/-/g)||[]).length;r>1?t.indexOf("-")===0?t="-"+t.substring(1).replace(/-/g,""):t=t.replace(/-/g,""):r===1&&t.indexOf("-")!==0&&(t="-"+t.replace("-",""))}if(n){if((t.match(/\./g)||[]).length>1){let i=t.indexOf(".");t=t.substring(0,i+1)+t.substring(i+1).replace(/\./g,"")}let c=t.indexOf(".");c!==-1&&t.length>c+l+1&&(t=t.substring(0,c+l+1))}return t=d(t,n),t}function d(o,s){if(!o)return o;let n=o.startsWith("-"),l=(n?o.substring(1):o).split("."),t=l[0]||"",e=s&&l[1]?"."+l[1]:"";return t=t.replace(/,/g,""),t.length>3&&(t=t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),(n?"-":"")+t+e}var A=()=>{let o=u({selector:"[comission-fees=sale-input]",log:"error"}),s=u({selector:"[comission-fees=savings-display]",log:"error"}),n=u({selector:"[comission-fees=calc-button]",log:"error"});if(!o||!s||!n)return;E(o,{allowDecimals:!1,allowNegative:!1,maxDecimals:0});let a=e=>{o.value="120,000",o.value=e,o.dispatchEvent(new Event("input"))},l=()=>{let e=parseInt(o.value.replace(/,/g,""),10),r=w(Number.isNaN(e)?0:e);s.textContent=`${d(Math.floor(r.savings).toString(),!1)}`};n.addEventListener("click",l),o.addEventListener("keydown",e=>{e.key==="Enter"&&l()}),(()=>{let e=m({selector:"[comission-example-price]"});if(e)for(let r of e){let c=r.getAttribute("comission-example-price");c&&r.addEventListener("click",()=>{a(c),l()})}})()};A();
